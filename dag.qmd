---
title: "complaints DAG"
format: 
  html:
    embed-resources: true
editor: visual
---

## Complaint Process DAG

Can we write down a dag for the stuff leading up to a complaint?

```{r packages}
#| echo: false
#| warning: false


library(ggdag)
library(ggplot2)
theme_set(theme_dag())

```

```{r dag_set}
#| code-fold: true

coords <- tibble::tribble(
  ~name,  ~x,  ~y
  , "bank_error", 1, 3
  , "events", 1, 1.6
  , "financial_situation", 1, 2.4
  , "financial_communication", 1, 1
  , "problem", 2, 2
  , "stakes", 2, 3
  , "legal_framework", 2, 3
  , "third_party", 2, 1 
  , "problem_resolution", 3, 2
  , "persistance", 3, 3
  , "intermediaries", 3, 1 
  , "intermediaries_framework", 3, 1.5
  , "search_mediators",  4, 2
  , "complaint_submission", 5, 2
)

complaining_dag <- dagify(
  complaint_submission ~ search_mediators
  , search_mediators ~  problem_resolution + persistance + intermediaries
  , problem ~ financial_situation + bank_error + third_party + events + financial_communication
  , problem_resolution ~ financial_situation + third_party + 
    persistance + legal_framework + intermediaries_framework
  , intermediaries_framework ~ intermediaries
  , intermediaries ~ problem
  , legal_framework ~ problem
  , financial_situation ~ events + bank_error 
  , persistance ~ legal_framework + financial_situation
  , events ~ third_party
  , labels = c(
    "complaint_submission" = "Submission of complaint"
    , "financial_situation" = "Financial Situation"
    , "problem" = "Problem to solve"
    , "third_party" = "Third Party Causes"
    , "events" = "Unfortunate Events"
    , "problem_resolution" = "FI Resolution"
    , "persistance" = "Persistance/self-efficacy"
    , "bank_error" = "FI Error"
    , "search_mediators" = "Search process"
    , "legal_framework" = "Legal Framework"
    , "stakes" = "Consumer Stakes"
    , "intermediaries" = "Intermediaries"
    , "intermediaries_framework" = "Intermediaries Framework"
    , "financial_communication" = "Financial Communication"
    )
  , coords = coords
  , latent = c("persistance")
)

```

```{r}
#| code-fold: true
#| column: screen
#| out-width: 80%
#| fig-format: svg
#| fig-align: center

ggdag(complaining_dag, text = FALSE, use_labels = "label", text_size = 3) 


```

## Define the nodes

FI Error

:   The financial institution causes a problem for the consumer.

    **Example:** Mortgage servicing transfer

Financial Situation

:   The consumers financial health. Can be a direct cause of problems through financial mismanagement.

    **DATA:** fico score, or financial wellbeing score

Unfortunate events

:   Bad stuff that happens to people. Divorce, death, job loss

Third party causes

:   Merchant issues, criminal fraud, other financial institutions. A common example a furnisher can cause you to try to solve a problem with a Credit Reporting Company.

Problem to solve

:   The consumer is trying to fix a specific thing. Lots of different examples-- fees, confusion, data stuff, problems making payments, problems with specific transactions

Legal Framework

:   Your problem has a relationship to legal procedures and rights. Even if that relationship is, you don't have any rights.

Consumer Stakes

:   Not sure if this node is needed. Basically this is a weigh capture that the likely consequences on the consumer will change their behavior.

FI resolution

:   If the FI resolves the consumer's problem in a satisfactory way then probably you won't get a complaint.

Peristance/self-efficacy

:   This is intended to capture psychological factors that may cause someone to pursue a problem. This is oversimplified. Other stuff probably plays in here, like sense of justice, trust in the FI, trust in government. Given that last factor, arguably their a two psychological states, one when complaining to the FI and one when complaining to us.

Search process

:   This is captures difficulties in finding the correct person to complaint to. For the sake of this simple exercise I'm including the stuff that happens once the consumer lands on our submission form. If the consumer abandons their complaint, it's summarized here, although conceptually it might make more sense to break it out.

## Data Simulation

Is it worth trying to simulate some data from this process. There is a lot going on. Maybe starting with a stripped down version of the "main path" from financial situation, through legal framework, FI resolution, search and then submission?

### Notes

**Inciting incident**

-   financial institution errors
-   life events
-   financial mismanagement
-   third parties (fraud, financial abuse, merchant stuff)

**Company behavior**

-   customer service
-   resolution direction (relief or no relief)
-   appropriateness of resolution (consumer is defrauded of a large sum, but only gets overdraft refunded)
-   quality of communication
-   non-customer service delays
-   company behavior is impacted by regulations

**Consumer motivations to complaint**

-   monetary stakes
-   other stakes (stay in home)
-   voice (want to change the companies policy)
    -   revenge - want to damage the company
    -   justice - want the company to do the right thing
-   control information collection/sharing/use
    -   consumer wants to control data and use of data
-   consumer understanding of legal rights
-   past experience complaining
-   perceived likelihood of success? (Self efficacy?)

How does this manifest though? All of these things contribute to some concept like "persistence"

**Consumer search**

-   internet search
-   social search
-   IRL social interaction
-   CFPB marketing
-   third parties and third party marketing (Credit repair, lawyer, etc)

Consumer then weighs one or more options and determines which one fits with motivation.

**Barriers to submission**

-   language
    -   comprehension
    -   fluency
-   time burden
-   context (landing pages, explanation)
